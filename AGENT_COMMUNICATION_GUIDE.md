# ‚öΩ FLUX Agent Communication Guide

## üéØ Overview

FLUX features **5 AI-powered football legend agents** that provide real responses using **Groq AI (LLaMA models)**. Each agent is specialized in a specific area of the Software Development Lifecycle (SDLC).

---

## üë• Meet Your AI Team

| Agent | Name | Role | Expertise | Keyboard Shortcut |
|-------|------|------|-----------|-------------------|
| ‚öΩ **Messi** | Requirements Analyst | Gathers requirements, creates user stories | `Ctrl+Shift+M` |
| ‚öΩ **Ronaldo** | Software Architect | Designs system architecture, technical specs | `Ctrl+Shift+R` |
| ‚öΩ **Neymar** | Developer | Writes code, implements features | `Ctrl+Shift+N` |
| ‚öΩ **Mbapp√©** | QA Tester | Creates test plans, quality assurance | `Ctrl+Shift+Q` |
| ‚öΩ **Benzema** | DevOps Engineer | CI/CD, deployment, infrastructure | `Ctrl+Shift+B` |

---

## üí¨ How to Call Agents

### 1. **Direct Agent Call** (Recommended for single agent)

Simply greet the agent by name:

```
Hi Messi
Hello Ronaldo
Hey Neymar
```

**Result:** Only that specific agent will respond with a personalized answer generated by Groq AI.

---

### 2. **Keyword-Based Routing** (Automatic)

The system automatically routes to the best agent based on keywords:

```
"I need help with requirements"  ‚Üí Messi responds
"Design a microservices architecture"  ‚Üí Ronaldo responds
"Write code for authentication"  ‚Üí Neymar responds
"Create test cases"  ‚Üí Mbapp√© responds
"Deploy to production"  ‚Üí Benzema responds
```

---

### 3. **Multi-Agent Collaboration** (Team Mode)

Call multiple agents at once:

```
"Hi everyone, let's discuss the new feature"
"Hello team, I need help with this project"
"Hey all, what are your thoughts on this?"
```

**Result:** All 5 agents respond with their perspectives, powered by Groq AI.

---

### 4. **Agent-to-Agent Communication** (A2A)

Agents can call each other automatically. For example:

```
User: "Hi Messi, gather requirements for a payment system"
Messi: "... Here are the requirements. Ronaldo, can you design the architecture?"
Ronaldo: "... Here's the architecture design. Neymar, please implement this."
Neymar: "... Code is ready. Mbapp√©, please test it."
```

**Automatic Flow:** When one agent mentions another by name, that agent automatically joins the conversation.

---

## üöÄ Real-Time Response Flow

### What Happens When You Send a Message:

1. **WebSocket Connection** establishes with backend (`ws://localhost:8000/ws/{session}`)
2. **Message is routed** to the appropriate agent(s)
3. **Agent processes request** using Groq AI (LLaMA 3.3 70B / GPT-OSS-120B models)
4. **Response streams back** via WebSocket in real-time
5. **Frontend displays** agent response with avatar, name, and timestamp

---

## üîß Backend Architecture

### WebSocket Flow:
```
Frontend (Next.js)
    ‚Üì WebSocket (port 3002 ‚Üí 8000)
Backend FastAPI (main.py)
    ‚Üì Routes to
SDLC Workflow (LangGraph)
    ‚Üì Calls
Agent (e.g., Messi, Ronaldo, Neymar)
    ‚Üì Generates response using
Groq AI (groq_models.py)
    ‚Üì Streams back
Frontend displays response
```

### Agent System Prompts:

Each agent has a unique personality and expertise:

- **Messi:** "You are Messi ‚öΩ, a Senior Requirements Analyst with 8+ years of experience..."
- **Ronaldo:** "You are Ronaldo ‚öΩ, a Senior Software Architect specializing in scalable systems..."
- **Neymar:** "You are Neymar ‚öΩ, a Senior Full-Stack Developer with expertise in modern frameworks..."
- **Mbapp√©:** "You are Mbapp√© ‚öΩ, a Senior QA Engineer focused on quality and testing..."
- **Benzema:** "You are Benzema ‚öΩ, a Senior DevOps Engineer with cloud infrastructure expertise..."

---

## üìä Models Used (Groq AI)

| Agent | Groq Model | Purpose |
|-------|------------|---------|
| Messi | `llama-3.3-70b-versatile` | Advanced requirement analysis |
| Ronaldo | `llama-3.1-8b-instant` | Fast architectural decisions |
| Neymar | `openai/gpt-oss-120b` | Code generation (131K context) |
| Mbapp√© | `openai/gpt-oss-20b` | Testing analysis |
| Benzema | `meta-llama/llama-guard-4-12b` | Infrastructure with safety focus |

---

## üêõ Troubleshooting

### Issue 1: Agents Not Responding

**Symptoms:** You see "Typing..." but no response appears

**Solutions:**
1. **Check backend is running:**
   ```bash
   cd c:\YOKA\FLUX\backend
   python main.py
   ```

2. **Verify Groq API key is set:**
   ```bash
   # Check .env file
   cat .env | grep GROQ_API_KEY
   ```

3. **Check WebSocket connection:**
   - Open browser DevTools ‚Üí Network tab ‚Üí WS filter
   - Should see connection to `ws://localhost:8000/ws/{session}`

---

### Issue 2: Generic/Mock Responses

**Symptoms:** Agents say "Hello! I'm ready to help" instead of real answers

**Cause:** Frontend showing cached/sample data instead of backend responses

**Solution:** 
1. Clear browser cache and reload
2. Restart backend server
3. Check browser console for WebSocket errors

---

### Issue 3: Agent Names Wrong

**Symptoms:** Seeing "Sara", "Marc", "Alex" instead of "Messi", "Ronaldo", "Neymar"

**Solution:** Backend agents have been updated - restart backend:
```bash
cd c:\YOKA\FLUX\backend
python main.py
```

---

## üìù Example Conversations

### Example 1: Single Agent (Direct Call)
```
User: Hi Messi, I need requirements for a blog platform

Messi ‚öΩ: Hello! I'm Messi, your Requirements Analyst. Let me help you gather
requirements for your blog platform. Based on standard blog functionality,
here are the key requirements:

**Functional Requirements:**
1. User Management
   - User registration and authentication
   - User profiles with bio and avatar
   - Role-based access control (Admin, Editor, Viewer)

2. Content Management
   - Create, edit, and delete blog posts
   - Rich text editor with formatting
   - Image and media uploads
   - Draft and publish workflow
   - Categories and tags

... [Real Groq AI-generated response continues]
```

---

### Example 2: Multi-Agent Collaboration
```
User: Hi team, help me build a payment gateway

Messi ‚öΩ: From a requirements perspective, here are the core needs:
- Secure payment processing (PCI-DSS compliance)
- Support for multiple payment methods (credit cards, PayPal, Stripe)
- Transaction history and receipts
- Refund management
... [Continues]

Ronaldo ‚öΩ: For the architecture, I recommend:
- Microservices architecture for scalability
- API Gateway pattern for security
- Event-driven design for asynchronous processing
- Database: PostgreSQL for transactions, Redis for caching
... [Continues]

Neymar ‚öΩ: I can implement this using:
- Backend: Node.js with Express
- Payment SDK: Stripe API
- Database ORM: Prisma
- Code structure: Clean architecture with repositories
... [Continues]

Mbapp√© ‚öΩ: For testing, I'll create:
- Unit tests for payment logic (Jest)
- Integration tests for API endpoints
- End-to-end tests for payment flows (Cypress)
- Security testing for PCI compliance
... [Continues]

Benzema ‚öΩ: For deployment, I'll set up:
- CI/CD pipeline with GitHub Actions
- Docker containers for consistency
- Kubernetes for orchestration
- AWS/Azure for cloud hosting
... [Continues]
```

---

### Example 3: Agent-to-Agent Communication
```
User: Hi Messi, create user stories for authentication

Messi ‚öΩ: Here are the user stories:

**User Story 1:** As a new user, I want to register an account...
**User Story 2:** As a registered user, I want to login securely...
**User Story 3:** As a user, I want to reset my password...

Ronaldo, can you design the authentication architecture for these requirements?

[System automatically adds Ronaldo to conversation]

Ronaldo ‚öΩ: Based on Messi's requirements, here's the authentication architecture:

**Architecture Components:**
1. Authentication Service (Node.js + JWT)
2. User Database (PostgreSQL)
3. Session Management (Redis)
4. Password Hashing (bcrypt)
... [Continues]

Neymar, please implement this authentication system.

[System automatically adds Neymar to conversation]

Neymar ‚öΩ: I'll implement the authentication system:

```javascript
// User Registration Endpoint
app.post('/api/auth/register', async (req, res) => {
  const { email, password } = req.body;
  
  // Hash password
  const hashedPassword = await bcrypt.hash(password, 10);
  
  // Save user
  const user = await db.users.create({
    email,
    password: hashedPassword
  });
  
  // Generate JWT
  const token = jwt.sign({ userId: user.id }, process.env.JWT_SECRET);
  
  res.json({ token, user });
});
```

... [Continues]
```

---

## üéØ Best Practices

### 1. **Use Direct Calls for Single Tasks**
- ‚úÖ "Hi Neymar, write code for..."
- ‚ùå "Everyone, help me write code"  (unnecessary - only Neymar needed)

### 2. **Use Team Mode for Complex Features**
- ‚úÖ "Hi team, design a complete e-commerce system"
- ‚úÖ "Everyone, review this architecture"

### 3. **Let Agents Call Each Other Naturally**
- Agents will automatically mention each other when needed
- System automatically adds mentioned agents to conversation

### 4. **Be Specific in Your Requests**
- ‚úÖ "Messi, create user stories for authentication with OAuth2"
- ‚ùå "Messi, help"  (too vague)

---

## üîê Security & Privacy

- **API Keys:** Groq API key stored securely in `.env` file
- **Data:** Conversation history stored temporarily in session
- **WebSocket:** Real-time secure communication
- **No Storage:** Agent responses not permanently stored (ephemeral)

---

## üìö Additional Resources

- **Groq AI Documentation:** https://console.groq.com/docs
- **LangGraph Documentation:** https://langchain-ai.github.io/langgraph/
- **FLUX GitHub Repo:** https://github.com/IlamSingleBrainCell/FLUX
- **Live Demo:** https://flux-six-drab.vercel.app

---

## üöÄ Quick Start

1. **Start Backend:**
   ```bash
   cd c:\YOKA\FLUX\backend
   python main.py
   ```

2. **Start Frontend:**
   ```bash
   cd c:\YOKA\FLUX\frontend
   npm run dev
   ```

3. **Open Browser:**
   ```
   http://localhost:3002/workspace
   ```

4. **Test Agent Call:**
   ```
   Type: "Hi Messi, help me gather requirements"
   ```

5. **Verify Response:**
   - Should see real Groq AI-generated response
   - Check browser console for WebSocket messages
   - Backend terminal shows Groq API calls

---

## üìû Support

If agents are not responding with real AI-generated content:

1. **Check Backend Logs:** Look for `[GROQ]` prefixed messages
2. **Verify API Key:** `echo $GROQ_API_KEY` (should not be empty)
3. **Test Groq Connection:** Run `backend/test_single_agent_calls.py`
4. **Check Network:** Ensure WebSocket connection established

---

**Built with ‚ù§Ô∏è and ‚öΩ by the FLUX Team**

*Powered by Groq AI ‚Ä¢ Real-time WebSockets ‚Ä¢ LangGraph Workflows*
